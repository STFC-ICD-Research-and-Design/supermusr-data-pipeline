<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="917" height="968"><desc>title%20Nexus%20Writer%20On%20EventList%20Message%0A%0Aparticipant%20Broker%0Aparticipant%20Nexus%20Writer%0Aparticipant%20Run%0Aparticipant%20Run%20Cache%0Aparticipant%20HDF5%20File%0A%0A%20%20Broker-%3ENexus%20Writer%3AEventList%20message%0A%20%20Broker%3C--Nexus%20Writer%3ACommit%20message%0A%20%20Nexus%20Writer-%3ERun%20Cache%3A%20Find%20run%20for%20whom%20event%20message%20timestamp%20is%20valid%0A%20%20Nexus%20Writer%3C--Run%20Cache%3A%20Optional%20valid%20run%20(mut%20ref)%0A%20%20alt%20If%20valid%20run%20found%0A%20%20%20%20Nexus%20Writer-%3E*Run%3AUpdate%20run%3A%0A%20%20%20%20note%20over%20Run%3AAppend%20event%20list%20to%20run%0A%20%20%20%20note%20over%20Run%3AUpdate%20%22%22last-modified%3Dnow%22%22%0A%20%20%20%20Run-%3E*HDF5%20File%3A%20Push%20Event%20List%20Command%0A%20%20%20%20destroysilent%20Run%0A%20%20%20%20note%20over%20HDF5%20File%3AAppend%20New%20Events%0A%20%20%20%20note%20over%20HDF5%20File%3ASet%20End%20Time%20(if%20needed)%0A%20%20%20%20destroyafter%20HDF5%20File%0A%20%20else%20else%0A%20%20%20%20Nexus%20Writer-%3ENexus%20Writer%3A%20Write%20warning%20to%20log%20and%20continue%0A%20%20end%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="917" height="968"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="281.68792182158757" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Nexus Writer On EventList Message</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 47.48040092923048 95.887643371 L 47.48040092923048 968.8409077229999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 214.89915839459505 95.887643371 L 214.89915839459505 968.8409077229999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 462.1626286454414 402.49940931199995 L 462.1626286454414 598.031792813" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 655.0452098927722 95.887643371 L 655.0452098927722 968.8409077229999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 788.9603885946595 598.031792813 L 788.9603885946595 761.3838258129999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601650000002 51.782594461 L 86.79320020846095 51.782594461 L 86.79320020846095 95.887643371 L 8.167601650000002 95.887643371 L 8.167601650000002 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.891297230500008" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Broker</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 154.95285996985677 51.782594461 L 274.8454568193333 51.782594461 L 274.8454568193333 95.887643371 L 154.95285996985677 95.887643371 L 154.95285996985677 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="172.67655555035677" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Nexus Writer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 600.650081817155 51.782594461 L 709.4403379683894 51.782594461 L 709.4403379683894 95.887643371 L 600.650081817155 95.887643371 L 600.650081817155 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="618.373777397655" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Run Cache</text></g></g><g><g><g><rect fill="white" stroke="none" x="66.81039150089713" y="128.558049971" width="128.75877632203125" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="69.26067199589713" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">EventList message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 47.48040092923048 149.793814261 L 201.44984101092837 149.793814261" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(214.89915839459505,149.793814261) translate(-214.89915839459505,-149.793814261)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 201.28648897792837 142.98747955266666 L 214.89915839459505 149.793814261 L 201.28648897792837 156.60014896933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="71.71374233097525" y="174.296619211" width="118.952074661875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="74.16402282597525" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Commit message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 214.89915839459505 195.532383501 L 60.929718312897144 195.532383501" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(47.48040092923048,195.532383501) translate(-47.48040092923048,-195.532383501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 61.09307034589715 188.72604879266666 L 47.48040092923048 195.532383501 L 61.09307034589715 202.33871820933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="261.41959346801957" y="220.035188451" width="347.1051813513281" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="263.8698739630196" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Find run for whom event message timestamp is valid</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 214.89915839459505 241.270952741 L 641.5958925091055 241.270952741" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(655.0452098927722,241.270952741) translate(-655.0452098927722,-241.270952741)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 641.4325404761055 234.46461803266666 L 655.0452098927722 241.270952741 L 641.4325404761055 248.07728744933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="345.7502895739766" y="265.77375769099996" width="178.44378913941406" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="348.2005700689766" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Optional valid run (mut ref)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 655.0452098927722 287.009521981 L 228.34847577826173 287.009521981" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(214.89915839459505,287.009521981) translate(-214.89915839459505,-287.009521981)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 228.51182781126172 280.20318727266664 L 214.89915839459505 287.009521981 L 228.51182781126172 293.8158566893333 Z"/></g></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 430.9922625327148 357.0058681215 L 493.3329947581679 357.0058681215 L 493.3329947581679 401.1109170315 L 430.9922625327148 401.1109170315 L 430.9922625327148 357.0058681215 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="448.7159581132148" y="384.7757137315" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Run</text></g><g><g><rect fill="white" stroke="none" x="282.19193265420176" y="357.82262828649993" width="81.50755561890625" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="284.6422131492018" y="372.5243112564999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Update run:</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 214.89915839459505 379.05839257649995 L 417.54294514904814 379.05839257649995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(430.9922625327148,379.05839257649995) translate(-430.9922625327148,-379.05839257649995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 417.3795931160481 372.2520578681666 L 430.9922625327148 379.05839257649995 L 417.3795931160481 385.8647272848333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 362.27834463579296 427.00221426199994 L 547.3452296850899 427.00221426199994 L 562.0469126550898 441.7038972319999 L 562.0469126550898 464.57318185199995 L 362.27834463579296 464.57318185199995 L 362.27834463579296 427.00221426199994 M 547.3452296850899 427.00221426199994 L 547.3452296850899 441.7038972319999 L 562.0469126550898 441.7038972319999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="385.14762925579294" y="449.8714988819999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Append event list to run</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 345.1093306587422 489.075986802 L 564.5142436621406 489.075986802 L 579.2159266321406 503.77766977199997 L 579.2159266321406 526.646954392 L 345.1093306587422 526.646954392 L 345.1093306587422 489.075986802 M 564.5142436621406 489.075986802 L 564.5142436621406 503.77766977199997 L 579.2159266321406 503.77766977199997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="367.97861527874215" y="511.94527142199996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Update </text><text fill="black" stroke="none" font-family="monospace" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="419.3243489213203" y="511.94527142199996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">last-modified=now</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 738.2481447353509 552.5382516225 L 839.6726324539682 552.5382516225 L 839.6726324539682 596.6433005325 L 738.2481447353509 596.6433005325 L 738.2481447353509 552.5382516225 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="755.971840315851" y="580.3080972325" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">HDF5 File</text></g><g><g><rect fill="white" stroke="none" x="510.97632048982973" y="553.3550117875001" width="178.45813240113281" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="513.4266009848297" y="568.0566947575" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Push Event List Command</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 462.1626286454414 574.5907760775001 L 724.7988273516843 574.5907760775001" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(738.2481447353509,574.5907760775001) translate(-738.2481447353509,-574.5907760775001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 724.6354753186843 567.7844413691668 L 738.2481447353509 574.5907760775001 L 724.6354753186843 581.3971107858334 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 699.6737989819839 622.534597763 L 863.5452952373354 622.534597763 L 878.2469782073354 637.236280733 L 878.2469782073354 660.105565353 L 699.6737989819839 660.105565353 L 699.6737989819839 622.534597763 M 863.5452952373354 622.534597763 L 863.5452952373354 637.236280733 L 878.2469782073354 637.236280733" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="722.5430836019838" y="645.403882383" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Append New Events</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 684.877816621144 684.6083703029999 L 878.3412775981752 684.6083703029999 L 893.0429605681752 699.3100532729999 L 893.0429605681752 722.1793378929999 L 684.877816621144 722.1793378929999 L 684.877816621144 684.6083703029999 M 878.3412775981752 684.6083703029999 L 878.3412775981752 699.3100532729999 L 893.0429605681752 699.3100532729999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="707.7471012411439" y="707.4776549229999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Set End Time (if needed)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 774.2587056246596 746.682142843 L 803.6620715646595 776.0855087829999 M 803.6620715646595 746.682142843 L 774.2587056246596 776.0855087829999" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g><rect fill="white" stroke="none" x="234.22914896626173" y="844.6933626429998" width="222.2161585241797" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="236.67942946126172" y="859.3950456129998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Write warning to log and continue</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 214.89915839459505 865.9291269329998 L 280.23997159459503 865.9291269329998 L 280.23997159459503 887.1648912229998 L 228.34847577826173 887.1648912229998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(214.89915839459505,887.1648912229998) translate(-214.89915839459505,-887.1648912229998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 228.51182781126172 880.3585565146665 L 214.89915839459505 887.1648912229998 L 228.51182781126172 893.9712259313332 Z"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 157.72594684459506 311.51232693099996 L 901.210562218175 311.51232693099996 L 901.210562218175 911.6676961729999 L 157.72594684459506 911.6676961729999 L 157.72594684459506 311.51232693099996 Z" stroke-miterlimit="10" stroke-width="2.3336004714285714" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 157.72594684459506 311.51232693099996 L 157.72594684459506 331.11457089099997 L 204.08515044166538 331.11457089099997 L 213.88627242166538 321.31344891099997 L 213.88627242166538 311.51232693099996 L 157.72594684459506 311.51232693099996" stroke-miterlimit="10" stroke-width="2.3336004714285714" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="174.06115014459505" y="324.580489571" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="227.77119522666538" y="312.819143195" width="107.84718574585938" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="230.22147572166537" y="324.580489571" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[If valid run found]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 157.72594684459506 800.5883137329998 L 901.2105622181751 800.5883137329998" stroke-miterlimit="10" stroke-width="2.3336004714285714" stroke-dasharray="4.083800825"/></g><g/><g><rect fill="white" stroke="none" x="227.77119522666538" y="801.8951299969998" width="35.54286445679688" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="230.22147572166537" y="813.6564763729998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[else]</text></g><g/></g><g/><g/><g/></g></svg>