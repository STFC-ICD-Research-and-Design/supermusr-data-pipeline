<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="846" height="968"><desc>title%20Nexus%20Writer%3A%20On%20RunStart%20Message%0A%0Aparticipant%20Broker%0Aparticipant%20Nexus%20Writer%0Aparticipant%20Run%0Aparticipant%20Run%20Cache%0Aparticipant%20HDF5%20File%0A%0A%20%20Broker-%3ENexus%20Writer%3ARunStart%20message%0A%20%20Broker%3C--Nexus%20Writer%3ACommit%20message%0A%20%20Nexus%20Writer-%3ERun%20Cache%3A%20Get%20optional%20latest%20run%0A%20%20Nexus%20Writer%3C--Run%20Cache%3A%20Optional%20latest%20run%0A%20%20alt%20If%20no%20run%20exists%2C%20or%20latest%20run%20does%20exist%20and%20has%20a%20stop%20time%0A%20%20%20%20Nexus%20Writer-%3E*Run%3ACreate%20new%20run%0A%20%20%20%20note%20over%20Run%3A-%20Initialise%20start%20time%20to%20message%20start%20time%5Cn-%20Initialise%20stop%20time%20to%20None%0A%20%20%20%20note%20over%20Run%3AInitialise%20%22%22last-modified%3Dnow%22%22%0A%20%20%20%20Run-%3ERun%20Cache%3A%20Push%20to%20back%0A%20%20%20%20Run-%3E*HDF5%20File%3A%20New%20Run%20Command%0A%20%20%20%20destroysilent%20Run%0A%20%20%20%20note%20over%20HDF5%20File%3ASave%20Run%20Parameters%0A%20%20%20%20destroyafter%20HDF5%20File%0A%20%20else%20else%0A%20%20%20%20Nexus%20Writer-%3ENexus%20Writer%3A%20Write%20error%20to%20log%20and%20continue%0A%20%20end</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="846" height="968"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="244.9612639019316" y="24.50280495" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Nexus Writer: On RunStart Message</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 47.48040092923048 95.887643371 L 47.48040092923048 968.8409077229996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 212.45106879498567 95.887643371 L 212.45106879498567 968.8409077229996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 439.3279881425117 402.49940931199995 L 439.3279881425117 660.1055653529997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 605.6046205062617 95.887643371 L 605.6046205062617 968.8409077229996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 727.0471957411875 660.1055653529997 L 727.0471957411875 761.3838258129997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="12.565541,5.445067766666667"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 8.167601650000002 51.782594461 L 86.79320020846095 51.782594461 L 86.79320020846095 95.887643371 L 8.167601650000002 95.887643371 L 8.167601650000002 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="25.891297230500008" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Broker</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 152.5047703702474 51.782594461 L 272.39736721972395 51.782594461 L 272.39736721972395 95.887643371 L 152.5047703702474 95.887643371 L 152.5047703702474 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="170.2284659507474" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Nexus Writer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 551.2094924306444 51.782594461 L 659.9997485818789 51.782594461 L 659.9997485818789 95.887643371 L 551.2094924306444 95.887643371 L 551.2094924306444 51.782594461 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="568.9331880111445" y="79.55244007099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Run Cache</text></g></g><g><g><g><rect fill="white" stroke="none" x="66.81039150089713" y="128.558049971" width="126.31068672242188" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="69.26067199589713" y="143.259732941" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RunStart message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 47.48040092923048 149.793814261 L 199.001751411319 149.793814261" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(212.45106879498567,149.793814261) translate(-212.45106879498567,-149.793814261)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 198.838399378319 142.98747955266666 L 212.45106879498567 149.793814261 L 198.838399378319 156.60014896933333 Z"/></g></g><g><g><rect fill="white" stroke="none" x="70.48969753117056" y="174.296619211" width="118.952074661875" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="72.93997802617056" y="188.99830218099999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Commit message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 212.45106879498567 195.532383501 L 60.929718312897144 195.532383501" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(47.48040092923048,195.532383501) translate(-47.48040092923048,-195.532383501)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 61.09307034589715 188.72604879266666 L 47.48040092923048 195.532383501 L 61.09307034589715 202.33871820933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="334.86320105747916" y="220.035188451" width="148.32928718628906" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="337.3134815524792" y="234.736871421" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Get optional latest run</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 212.45106879498567 241.270952741 L 592.155303122595 241.270952741" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(605.6046205062617,241.270952741) translate(-605.6046205062617,-241.270952741)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 591.991951089595 234.46461803266666 L 605.6046205062617 241.270952741 L 591.991951089595 248.07728744933334 Z"/></g></g><g><g><rect fill="white" stroke="none" x="347.08939734654166" y="265.77375769099996" width="123.87689460816406" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="349.5396778415417" y="280.47544066099994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Optional latest run</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 605.6046205062617 287.009521981 L 225.90038617865235 287.009521981" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray="6.53408132"/><g transform="translate(212.45106879498567,287.009521981) translate(-212.45106879498567,-287.009521981)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 226.06373821165235 280.20318727266664 L 212.45106879498567 287.009521981 L 226.06373821165235 293.8158566893333 Z"/></g></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 408.1576220297851 357.0058681215 L 470.4983542552382 357.0058681215 L 470.4983542552382 401.1109170315 L 408.1576220297851 401.1109170315 L 408.1576220297851 357.0058681215 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="425.8813176102851" y="384.7757137315" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Run</text></g><g><g><rect fill="white" stroke="none" x="257.7395477054713" y="357.82262828649993" width="105.12959541382813" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="260.1898282004713" y="372.5243112564999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Create new run</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 212.45106879498567 379.05839257649995 L 394.70830464611845 379.05839257649995" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(408.1576220297851,379.05839257649995) translate(-408.1576220297851,-379.05839257649995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 394.5449526131184 372.2520578681666 L 408.1576220297851 379.05839257649995 L 394.5449526131184 385.8647272848333 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 281.2189574287617 427.00221426199994 L 582.7353358862617 427.00221426199994 L 597.4370188562617 441.7038972319999 L 597.4370188562617 480.90838515199994 L 281.2189574287617 480.90838515199994 L 281.2189574287617 427.00221426199994 M 582.7353358862617 427.00221426199994 L 582.7353358862617 441.7038972319999 L 597.4370188562617 441.7038972319999" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="304.0882420487617" y="449.8714988819999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- Initialise start time to message start time</text><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="304.0882420487617" y="466.2067021819999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">- Initialise stop time to None</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 319.42932272417187 505.41119010199986 L 544.5249705908516 505.41119010199986 L 559.2266535608516 520.1128730719998 L 559.2266535608516 542.9821576919999 L 319.42932272417187 542.9821576919999 L 319.42932272417187 505.41119010199986 M 544.5249705908516 505.41119010199986 L 544.5249705908516 520.1128730719998 L 559.2266535608516 520.1128730719998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="342.29860734417184" y="528.2804747219999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Initialise </text><text fill="black" stroke="none" font-family="monospace" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="399.3350758500312" y="528.2804747219999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">last-modified=now</text></g><g><g><rect fill="white" stroke="none" x="477.639520838664" y="567.4849626419998" width="89.65356697144531" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="480.089801333664" y="582.1866456119998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Push to back</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 439.3279881425117 588.7207269319998 L 592.155303122595 588.7207269319998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(605.6046205062617,588.7207269319998) translate(-605.6046205062617,-588.7207269319998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 591.991951089595 581.9143922236665 L 605.6046205062617 588.7207269319998 L 591.991951089595 595.5270616403332 Z"/></g></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 676.3349518818789 614.6120241624997 L 777.7594396004961 614.6120241624997 L 777.7594396004961 658.7170730724997 L 676.3349518818789 658.7170730724997 L 676.3349518818789 614.6120241624997 Z" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="694.0586474623789" y="642.3818697724997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">HDF5 File</text></g><g><g><rect fill="white" stroke="none" x="489.3862020294023" y="615.4287843274998" width="136.89053596558594" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="491.8364825244023" y="630.1304672974998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">New Run Command</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 439.3279881425117 636.6645486174998 L 662.8856344982122 636.6645486174998" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(676.3349518818789,636.6645486174998) translate(-676.3349518818789,-636.6645486174998)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 662.7222824652122 629.8582139091665 L 676.3349518818789 636.6645486174998 L 662.7222824652122 643.4708833258331 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 632.0662701910118 684.6083703029997 L 807.3264383213633 684.6083703029997 L 822.0281212913633 699.3100532729997 L 822.0281212913633 722.1793378929997 L 632.0662701910118 722.1793378929997 L 632.0662701910118 684.6083703029997 M 807.3264383213633 684.6083703029997 L 807.3264383213633 699.3100532729997 L 822.0281212913633 699.3100532729997" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="654.9355548110117" y="707.4776549229997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Save Run Parameters</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 712.3455127711875 746.6821428429997 L 741.7488787111874 776.0855087829997 M 741.7488787111874 746.6821428429997 L 712.3455127711875 776.0855087829997" stroke-miterlimit="10" stroke-width="2.613632528" stroke-dasharray=""/></g><g><g><rect fill="white" stroke="none" x="231.78105936665236" y="844.6933626429995" width="201.82960762085938" height="21.23576429"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="234.23133986165234" y="859.3950456129995" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Write error to log and continue</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 212.45106879498567 865.9291269329996 L 277.79188199498566 865.9291269329996 L 277.79188199498566 887.1648912229996 L 225.90038617865235 887.1648912229996" stroke-miterlimit="10" stroke-width="1.3612669416666667" stroke-dasharray=""/><g transform="translate(212.45106879498567,887.1648912229996) translate(-212.45106879498567,-887.1648912229996)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 226.06373821165235 880.3585565146662 L 212.45106879498567 887.1648912229996 L 226.06373821165235 893.9712259313329 Z"/></g></g><g><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 155.27785724498568 311.51232693099996 L 830.1957229413631 311.51232693099996 L 830.1957229413631 911.6676961729996 L 155.27785724498568 911.6676961729996 L 155.27785724498568 311.51232693099996 Z" stroke-miterlimit="10" stroke-width="2.3336004714285714" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 155.27785724498568 311.51232693099996 L 155.27785724498568 331.11457089099997 L 201.637060842056 331.11457089099997 L 211.438182822056 321.31344891099997 L 211.438182822056 311.51232693099996 L 155.27785724498568 311.51232693099996" stroke-miterlimit="10" stroke-width="2.3336004714285714" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="171.61306054498567" y="324.580489571" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">alt</text><g><rect fill="white" stroke="none" x="225.323105627056" y="312.819143195" width="343.83876289429685" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="227.773386122056" y="324.580489571" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[If no run exists, or latest run does exist and has a stop time]</text><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 155.27785724498568 800.5883137329996 L 830.1957229413632 800.5883137329996" stroke-miterlimit="10" stroke-width="2.3336004714285714" stroke-dasharray="4.083800825"/></g><g/><g><rect fill="white" stroke="none" x="225.323105627056" y="801.8951299969996" width="35.54286445679688" height="16.988611432000003"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8.8pt" font-style="normal" font-weight="bold" text-decoration="normal" x="227.773386122056" y="813.6564763729996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">[else]</text></g><g/></g><g/><g/><g/></g></svg>